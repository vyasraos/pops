version: '3'

# Load environment variables from .env file
dotenv: ['.env']

tasks:
  default:
    desc: Show available tasks
    cmds:
      - task --list

##### POPS CLI DEVELOPMENT #####

  pops:watch:
    desc: Start POPS CLI in watch mode for development
    cmds:
      - echo "ğŸš€ Starting POPS CLI in watch mode..."
      - echo "ğŸ’¡ Make changes to src/ files and test instantly"
      - echo "ğŸ”„ Use Ctrl+C to stop watching"
      - echo "ğŸ“‹ Example - task pops:watch -- validate"
      - echo ""
      - bun run dev:watch -- {{.CLI_ARGS}}

  pops:build:
    desc: Build POPS CLI and install as global binary
    cmds:
      - echo "ğŸ”¨ Building POPS CLI..."
      - bun run build
      - echo "ğŸ“¦ Creating global binary..."
      - bun link
      - echo "âœ… POPS CLI installed globally!"
      - echo "ğŸ¯ You can now run 'pops' from anywhere"
      - echo ""
      - pops --version

  pops:dev:
    desc: Quick test POPS command without watch mode
    cmds:
      - bun run dev -- {{.CLI_ARGS}}

  pops:unlink:
    desc: Remove global POPS CLI binary
    cmds:
      - echo "ğŸ—‘ï¸  Removing global POPS CLI..."
      - bun unlink pops
      - echo "âœ… POPS CLI removed from global binaries"